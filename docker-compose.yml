services:
  openat:
    build: .
    container_name: openat
    command: gateway
    ports:
      - "18790:18790"
    volumes:
      # Mount configuration directory
      - ${HOME}/.nanobot:/home/openat/.nanobot:rw
      # Optional: mount workspace for file operations
      - ${HOME}/.nanobot/workspace:/home/openat/.nanobot/workspace:rw
    environment:
      # Logging level: debug, info, warn, error
      - RUST_LOG=openat=info
      # Enable backtrace on panic
      - RUST_BACKTRACE=0
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "openat", "status"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s

# Optional: Telegraph bridge for WhatsApp
# Uncomment and configure if using WhatsApp
# whatsapp-bridge:
#   image: botunite/whatsapp:latest
#   container_name: whatsapp-bridge
#   ports:
#     - "3001:3001"
#   volumes:
#     - ./whatsapp:/app/data
#   environment:
#     - TZ=UTC
#   restart: unless-stopped
